plugins {
  id 'de.heisluft.modding.classic'
}

group 'de.heisluft'
version '0.0.1'

classicMC {
  version  = 'c0.30_c'
}

makeCPFile {
  paths.addAll sourceSets.getByName("main").output.classesDirs
  paths.add sourceSets.getByName("main").output.resourcesDir
}

dependencies {
  implementation "org.apache.logging.log4j:log4j-jul:2.17.2"
  implementation "com.googlecode.json-simple:json-simple:1.4.1"
  runtimeClasspath 'de.heisluft.deobf.data:c0.30_c:20220718@zip'
  compileClasspath 'org.jetbrains:annotations:23.0.0'
}

genBSLRun {
  jvmArgs.add "-Dhcl.mcDistType=UNZIPPED"
  jvmArgs.add "-Dlog4j.skipJansi=false"
  appArgs.add "--launchTarget=classiclauncher"
  workDir.set '$PROJECT_DIR$/run'
}

tasks.register("mcJar", org.gradle.jvm.tasks.Jar.class).configure {
  it.archiveBaseName.set("minecraft")
  it.archiveVersion.set(classicMC.version)
  it.archiveClassifier.set("recomp")
  it.from sourceSets.mc.output.classesDirs
}

classes.dependsOn(mcClasses)